{% extends "quiz/layout.html" %}

{% block body %}

<style>
  .option-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 15px;
    cursor: pointer;
    text-align: center;
    transition: border-color 0.3s, background-color 0.3s;
  }
  .option-card.selected {
    border-color: #0d6efd;
    background-color: #e7f1ff;
  }
</style>


<div class="container mt-5 border p-5 shadow-lg rounded">
    <h2 class="text-center mb-3">Game Configuration</h2>

    <div class="text-center mb-4">
        <p> Prepare your game! </p>

        {% if error_message %}
            <div class="alert alert-danger" role="alert">
                {{ error_message }}
            </div>
        {% endif %}
        
        <form method="post" class="mt-5" action="{% url 'game_configuration' %}" >
            {% csrf_token %}

            <div class="form-group">
                <label for="number_of_questions" class="mb-2"><strong style="font-size: 20px;">Game Mode</strong></label>
                <div id="gameModeCards" class="d-flex gap-3 justify-content-center mb-4">
                    <div class="option-card selected" data-value="music_video">Music & Video</div>
                    <div class="option-card" data-value="audio_based">Audio</div>
                    <div class="option-card" data-value="text_based">Lyrics</div>
                </div>
                <input type="hidden" name="game_mode" id="game_mode_hidden" value="music_video">
            </div>
            
            <div class="form-group mt-5">
                <label for="category"><strong style="font-size: 20px;">Category</strong></label>

            </div>

            <div class="form-group mt-5">
                <label for="number_of_questions"><strong style="font-size: 20px;">Number of Questions</strong></label>

                <input type="range" class="form-range" id="number_of_questions" name="number_of_questions" min="1" max="25" value="10" oninput="this.nextElementSibling.value = this.value">

                <input class="form-control mx-auto text-center" style="width: 80px;" onblur="this.value = this.value < 1 ? 1 : this.value > 25 ? 25 : this.value" type="number"  value="10" min="1" max="25" onchange="this.previousElementSibling.value = this.value" />
            </div>

            <button type="submit" class="btn btn-primary mt-5">Start Game</button>
        </form>
    </div>

</div>

<script>
  const modeCards = document.querySelectorAll('#gameModeCards .option-card');
  const hiddenInputGameMode = document.getElementById('game_mode_hidden');

  modeCards.forEach(card => {
    card.addEventListener('click', () => {
      modeCards.forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');
      hiddenInputGameMode.value = card.getAttribute('data-value');
    });
  });
</script>

{% endblock %}
