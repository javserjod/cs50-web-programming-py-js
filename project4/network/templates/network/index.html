{% extends "network/layout.html" %}

{% block body %}
    <h1>All Posts</h1>
    {% if user.is_authenticated %}
        <div class="container mt-4 mx-auto p-4 border rounded text-">
            <form method="POST" action="{% url 'index' %}" class="d-flex flex-column align-items-start">
                {% csrf_token %}
                <h3 class="mb-3">New Post</h3>
                <textarea name="content" rows="4" placeholder="What's on your mind?" class="form-control mb-3" style="min-height:50px;" required></textarea>
                <button type="submit" class="btn btn-primary">Post</button>
            </form>
        </div>
    {% endif %}

    {% for post in posts %}
        <div class="container mt-2 mx-auto p-4 border rounded text-">
            <a href="{% url 'profile' post.author.username %}"><h5>{{ post.author.username }}</h5></a>
            <p>{{ post.content }}</p>
            <p class="text-muted">{{ post.formatted_date}}</p>
            <button>❤️ {{ post.like_count }}</button>
            <button>Comment</button>
        </div>
    {% endfor %}

{% endblock %}